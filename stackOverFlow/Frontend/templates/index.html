{% extends "layout.html" %}
{% block content %}
<header>
	<div style="width:50%;margin:auto;height:80px;">
		<img style="text-align:center;margin:auto" src="../static/img/StackSearch.gif"/>  
	</div>

	<script type="text/javascript">
	function show(elementID) {
        if(document.getElementById(elementID).style.display=='none') {
            document.getElementById(elementID).style.display='block';
        }
        return false;
    }
    function hide(elementID) {
        if(document.getElementById(elementID).style.display=='block') {
            document.getElementById(elementID).style.display='none';
        }
        return false;
    }
			console.log("new js")
		  /*$(function() {
		    $('').bind('click', function() {
		      $.getJSON($SCRIPT_ROOT + '/_add_numbers', {
		        a: $('input[name="a"]').val(),
		        b: $('input[name="b"]').val()
		      }, function(data) {
		        $("#result").text(data.result);
		      });
		      return false;
		    });
		  });

	function handleclick(cb){
		if(cb.checked==true){
			name=cb.name;
			if(name=="all"){
				labels= document.getElementsByTagName('LABEL');
				for(i=1;i<labels.length;i++){
					labels[i].style.display="block";
				}
			}else{
				labels=document.getElementsByName(name);
				console.log(labels);
				for(i=1;i<labels.length;i++){
					labels[i].style.display="block";
				}
			}
			//labels.style.display="none";
		}else{
			if(name=="all"){
				labels= document.getElementsByTagName('LABEL');
				for(i=1;i<labels.length;i++){
					labels[i].style.display="none";
				}
			}else{
				labels=document.getElementsByName(name);
				console.log(labels);
				for(i=1;i<labels.length;i++){
					labels[i].style.display="none";
				}
			}
		}
	}*/
	</script>
</header>
    <form method="post" action="/" enctype=multipart/form-data>
	    <p><div style="width:60%;margin:auto;"><label></label> <input class="query" type="text" name="txt_query" required>
	    <button type="submit">Go</button></p></div>
	    <div class ="content">
	    <div class="left"> 
	    	{% if categories %}
	    	<ul class="entries">
	    	<h2>Categories</h2>
	    	<label><input id="category" type="checkbox" name="all" value="all"/> All </label>
			  {% for k_par,v_par in categories[0].items() %}
			    <li>
			    	<label><input id="category" type="checkbox" name={{ k_par }} value={{ k_par }} ({{ v_par }}) />{{ k_par }} ({{ v_par }}) </label>
			    	{% if categories[1] %}
			    	<ul class="entries">
			    		 {% for k_child,v_children in categories[1].items() %}
			    		 	{% if (k_child==k_par) %}
					    		 
					    		 	{% for v_child in v_children %}

					    		 	<li>
					    		 	<label><input id="category" type="checkbox" name={{ v_child[0] }} value={{ v_child[0] }} ({{ v_child[1] }})  />{{ v_child[0] }} ({{ v_child[1] }}) </label><br>
					    		 	{% endfor %}

						    {% endif %}		
							    	{% if categories[2] %}
								    	<ul class="entries">
								    		 {% for k_grand,v_grandchildren in categories[2].items() %}
									    		 {% if (k_grand==v_child[0]) %}
									    		 	{% for v_grand in v_grandchildren %}
											    		 <li>
											    		 	<label><input id="category" type="checkbox" name={{ v_grand[0] }} value={{ v_grand[0] }} ({{ v_grand[1] }}) />{{ v_grand[0] }} ({{ v_grand[1] }})<label><br>
											    		 	
												    	</li>
										    		{% endfor %}
										    	{% endif %}
									    	{% endfor %}
									    </ul>

						    		{% endif %}
						    	</li>
				    	{% endfor %}
				    </ul>
			    	{% endif %}
			    </li>
			  {% endfor %}
			</ul>
	    	{%else%}
	    	<!--<div id ="empty">
	    		<h2>No results to display</h2>
	    	</div>-->
	    	{% endif %}
	    </div> 


	    <div class="answers">
	    	{% if results %}
	    	<ul class="entries">
	    	<h2>Results</h2>
			  {% for k,v in results.items() %}
                <h3>
				<label name={{ k }} style="display:block;">
				{{ k }}</label></h3>
			    <li>
				<label name={{ k }} style="display:block;">
                    {% for qANDans in v %}
                        <strong><a onclick="return show({{ qANDans[0].decode('utf8') }});">{{ qANDans[1].decode('utf8') }}</a></strong><br>
                        <p style="display:none;width:500px;" id="{{ qANDans[0].decode('utf8') }}">
                        	<a onclick="return hide({{ qANDans[0].decode('utf8') }});">
                        		{{ qANDans[2].decode('utf8') }}
                        	</a>
                        </p>
                    {% endfor %}
				</label>
			    </li>

			  {% endfor %}
			</ul>
	    	{%else%}
	    	<div id ="empty">
	    		<h2>No results to display .!..&nbsp;</h2>
	    	</div>
	    	{% endif %}

	    </div>
	    </div>
	    </div>
    </form>
{% endblock %}